webpackJsonp([6],{"6aWC":function(s,a,t){s.exports=t("RvUK")},RvUK:function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("p",[s._v("demo演示见/Users/liushiqin/Documents/study/demo/webpack入门/webpack-demo")]),s._v(" "),t("h1",[s._v("一、如何给一个新项目引入webpack及配置?")]),s._v(" "),t("h2",[s._v("1、创建npm环境，引入webpack包")]),s._v(" "),t("ol",[t("li",[s._v("新建文件夹")]),s._v(" "),t("li",[s._v("在命令行中输入 "),t("code",[s._v("npm init -y")]),s._v("，引入npm环境，空文件夹中会出现package.json文件（前提先装了node）")]),s._v(" "),t("li",[s._v("安装webpack: "),t("code",[s._v("npm i webpack@4 webpack-cli@4 -D")]),s._v("，然后项目出现了package-lock.json文件和node-mudules文件")])]),s._v(" "),t("h2",[s._v("2、创建src文件夹内容及配置文件")]),s._v(" "),t("ol",[t("li",[s._v("创建src文件夹，并创建一个index.js文件,里面随便加一条打印信息")]),s._v(" "),t("li",[s._v("创建一个webpack配置文件，如webpack.config.js，这也是webpack默认的配置文件的名字")]),s._v(" "),t("li",[s._v("配置文件编写：设置模式和入口出口")])]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" path = "),t("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),t("span",{staticClass:"hljs-string"},[s._v("'path'")]),s._v(");\n"),t("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(".exports = {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("mode")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'development'")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 开发模式  线上模式：production，代码会被压缩")]),s._v("\n  "),t("span",{staticClass:"hljs-attr"},[s._v("entry")]),s._v(": path.join(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'src'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'index.js'")]),s._v("), "),t("span",{staticClass:"hljs-comment"},[s._v("// 入口文件")]),s._v("\n  "),t("span",{staticClass:"hljs-attr"},[s._v("output")]),s._v(": { "),t("span",{staticClass:"hljs-comment"},[s._v("// 出口文件配置")]),s._v("\n   "),t("span",{staticClass:"hljs-attr"},[s._v("filename")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'bundle.js'")]),s._v(",\n   "),t("span",{staticClass:"hljs-attr"},[s._v("path")]),s._v(": path.join(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'dist'")]),s._v(")\n  }\n}\n")])]),s._v(" "),t("h2",[s._v("3、编辑运行命令—测试一下")]),s._v(" "),t("ol",[t("li",[s._v("在package.json中script加入一行运行webpack的命令，如下红色部分")])]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-string"},[s._v('"scripts"')]),s._v(": {\n    "),t("span",{staticClass:"hljs-string"},[s._v('"test"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),s._v(",\n    "),t("span",{staticClass:"hljs-string"},[s._v('"build"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"webpack --config webpack.config.js"')]),s._v("\n\t\t"),t("span",{staticClass:"hljs-comment"},[s._v("// --config后面内容也可以不要，默认是这个文件 实际运用可能有多个webpack文件，那就可以改这里的路径和文件名")]),s._v("\n  },\n")])]),s._v(" "),t("p",[s._v("2、运行"),t("code",[s._v("npm run build")]),s._v(" ，进行打包，完成后在dist中会有一个bundle.js文件。")]),s._v(" "),t("blockquote",[t("p",[s._v("以上是对一个纯js文件进行打包，下面尝试加入html，模拟一个简单网页内容")])]),s._v(" "),t("h2",[s._v("4、引入webpack插件及配置—webpack4版本")]),s._v(" "),t("p",[s._v("下面引入一些常见基本的webpack插件")]),s._v(" "),t("ol",[t("li",[s._v("在src目录下创建一个index.html文件，写入一些基本的页面结构。然后引入html-webpack-plugin，这是用来解析html的插件")])]),s._v(" "),t("p",[t("code",[s._v("npm install html-webpack-plugin@4 -D")])]),s._v(" "),t("ol",[t("li",[s._v("引入webpack-dev-server, 这是能启动服务的插件（可以帮我们启动本地服务、跨域、热更新等等功能）")])]),s._v(" "),t("p",[t("code",[s._v("npm install webpack-dev-server -D")])]),s._v(" "),t("p",[s._v("如果环境安装有问题，也可以使用淘宝镜像")]),s._v(" "),t("p",[t("code",[s._v("npm install webpack-dev-server -D —registry-https://registry.npm.taobao.org")])]),s._v(" "),t("ol",[t("li",[s._v("要使用这个html插件，需要在我们的webpck.config.js配置文件中引入及配置这个插件，如下黄色背景部分。")])]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" path = "),t("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),t("span",{staticClass:"hljs-string"},[s._v("'path'")]),s._v(");\n"),t("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" HtmlWebpackPlugin = "),t("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),t("span",{staticClass:"hljs-string"},[s._v("'html-webpack-plugin'")]),s._v(")\n\n"),t("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(".exports = {\n  "),t("span",{staticClass:"hljs-attr"},[s._v("mode")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'development'")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 开发模式，不会压缩代码  线上模式：production，会压缩打码")]),s._v("\n  "),t("span",{staticClass:"hljs-attr"},[s._v("entry")]),s._v(": path.join(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'src'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'index.js'")]),s._v("), "),t("span",{staticClass:"hljs-comment"},[s._v("// 入口文件")]),s._v("\n  "),t("span",{staticClass:"hljs-attr"},[s._v("output")]),s._v(": { "),t("span",{staticClass:"hljs-comment"},[s._v("// 出口文件配置")]),s._v("\n   "),t("span",{staticClass:"hljs-attr"},[s._v("filename")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'bundle.js'")]),s._v(",\n   "),t("span",{staticClass:"hljs-attr"},[s._v("path")]),s._v(": path.join(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'dist'")]),s._v(")\n  },\n  "),t("span",{staticClass:"hljs-attr"},[s._v("plugins")]),s._v(": [\n   "),t("span",{staticClass:"hljs-comment"},[s._v("// 引入htmlwebpackplugin插件，解析html文件")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" HtmlWebpackPlugin({\n     "),t("span",{staticClass:"hljs-attr"},[s._v("template")]),s._v(": path.join(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'src'")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'index.html'")]),s._v("), "),t("span",{staticClass:"hljs-comment"},[s._v("// 找到已有的index.html路径")]),s._v("\n     "),t("span",{staticClass:"hljs-attr"},[s._v("filename")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'index.html'")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 产出的文件名字")]),s._v("\n   }),\n  ],\n"),t("span",{staticClass:"hljs-comment"},[s._v("// 配置本地服务")]),s._v("\n  "),t("span",{staticClass:"hljs-attr"},[s._v("devServer")]),s._v(": {\n   "),t("span",{staticClass:"hljs-attr"},[s._v("port")]),s._v(": "),t("span",{staticClass:"hljs-number"},[s._v("3000")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 端口号")]),s._v("\n   "),t("span",{staticClass:"hljs-attr"},[s._v("contentBase")]),s._v(": path.join(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'dist'")]),s._v(")\n  }\n}\n")])]),s._v(" "),t("ol",[t("li",[s._v("另外需要引入"),t("code",[s._v("webpack-dev-server")]),s._v("插件及配置，如上蓝色背景部分。")]),s._v(" "),t("li",[s._v("配置一个启动命令，在package.json中script，如下红色部分。")])]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-string"},[s._v('"scripts"')]),s._v(": {\n    "),t("span",{staticClass:"hljs-string"},[s._v('"test"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"echo \\"Error: no test specified\\" && exit 1"')]),s._v(",\n    "),t("span",{staticClass:"hljs-string"},[s._v('"build"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"webpack --config webpack.config.js"')]),s._v(",\n    "),t("span",{staticClass:"hljs-string"},[s._v('"dev"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"webpack-dev-server"')]),s._v("\n  },\n")])]),s._v(" "),t("ol",[t("li",[s._v("然后运行 "),t("code",[s._v("npm run dev")])])]),s._v(" "),t("p",[s._v("问题，由于不同webpack版本有所不同，尤其跨大版本，配置已经有了变化，如出现各种版本问题引起的报错，按如下安装webpack4版本和对应插件，再执行npm run dev即可")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-string"},[s._v('"html-webpack-plugin"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"^3.2.0"')]),s._v(",\n"),t("span",{staticClass:"hljs-string"},[s._v('"webpack"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"^4.41.0"')]),s._v(",\n"),t("span",{staticClass:"hljs-string"},[s._v('"webpack-cli"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"^3.3.9"')]),s._v(",\n"),t("span",{staticClass:"hljs-string"},[s._v('"webpack-dev-server"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"^3.8.2"')]),s._v("\n")])]),s._v(" "),t("ol",[t("li",[s._v("访问浏览器 "),t("a",{attrs:{href:"http://localhost:3000/"}},[s._v("http://localhost:3000/")]),s._v(" 即可看到我们编写的index.html页面，在打包的dist目录里的index.html文件可以看到，他把前面的index.js文件也挂载到了index.html中。")])]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[s._v("<html lang="),t("span",{staticClass:"hljs-string"},[s._v('"en"')]),s._v(">\n\t...\n  <body>\n    "),t("span",{staticClass:"xml"},[t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")]),s._v("这是一个index.html基础文件"),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")])]),s._v("\n\t  "),t("span",{staticClass:"xml"},[t("span",{staticClass:"hljs-tag"},[s._v("<"),t("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(" "),t("span",{staticClass:"hljs-attr"},[s._v("src")]),s._v("="),t("span",{staticClass:"hljs-string"},[s._v('"bundle.js"')]),s._v(">")]),t("span",{staticClass:"hljs-tag"},[s._v("</"),t("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")])]),s._v("\n\t<"),t("span",{staticClass:"hljs-regexp"},[s._v("/body>\n</")]),s._v("html>\n")])]),s._v(" "),t("h1",[s._v("二、如何配置babel?")]),s._v(" "),t("blockquote",[t("p",[s._v("我们希望es6的代码打包后能够变成es5的代码（因为有些浏览器对es6还没有做到完全支持），就需要用到babel插件。")])]),s._v(" "),t("blockquote",[t("p",[s._v("假如在我们上文的index.js中编写一个箭头函数，我们发现打包出来的文件，在浏览器中直接看源码，还是箭头函数，这是es6的语法，那么如果要转成es5 ，要怎么做呢？")])]),s._v(" "),t("h2",[s._v("1、"),t("strong",[s._v("安装babel的系列npm包")])]),s._v(" "),t("p",[s._v("babel是一个npm包组—@babel标识，有很多的模块，这里需要安装babel/core核心、babel/preset-env模块、以及babel-loader")]),s._v(" "),t("p",[t("code",[s._v("npm install @babel/core @babel/preset-env babel-loader -D")])]),s._v(" "),t("h2",[s._v("2、创建.babelrc配置文件，配置webpack的module")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[s._v("{\n "),t("span",{staticClass:"hljs-string"},[s._v('"presets"')]),s._v(": ["),t("span",{staticClass:"hljs-string"},[s._v('"@babel/preset-env"')]),s._v("] "),t("span",{staticClass:"hljs-comment"},[s._v("// 预设配置")]),s._v("\n}\n")])]),s._v(" "),t("p",[s._v("在webpack配置里面增加module—rule配置，增加不同的loader，来解析不同的资源")]),s._v(" "),t("p",[s._v("如这里，我们就需要用babel来对js文件进行一个编译加载，进行es6—>es5的转换")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[s._v("......\nmodule: {\n   "),t("span",{staticClass:"hljs-attr"},[s._v("rules")]),s._v(": [\n     {\n      "),t("span",{staticClass:"hljs-attr"},[s._v("test")]),s._v(": "),t("span",{staticClass:"hljs-regexp"},[s._v("/\\.js$/")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 匹配js文件")]),s._v("\n      "),t("span",{staticClass:"hljs-attr"},[s._v("loader")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'babel-loader'")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 用babel加载器处理")]),s._v("\n      "),t("span",{staticClass:"hljs-attr"},[s._v("exclude")]),s._v(": "),t("span",{staticClass:"hljs-regexp"},[s._v("/node_modules/")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 除node_modules之外的文件")]),s._v("\n      "),t("span",{staticClass:"hljs-attr"},[s._v("include")]),s._v(": path.join(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'src'")]),s._v(") "),t("span",{staticClass:"hljs-comment"},[s._v("// 包括src目录下的文件")]),s._v("\n     }\n   ]\n },\n"),t("span",{staticClass:"hljs-attr"},[s._v("plugins")]),s._v(": []\n......\n")])]),s._v(" "),t("h2",[s._v("3、重新运行")]),s._v(" "),t("p",[s._v("重新num run dev，发现打包后的js代码，已经转成了es5的代码，箭头函数转成了普通函数")]),s._v(" "),t("h1",[s._v("三、如何配置webpack生产环境")]),s._v(" "),t("blockquote",[t("p",[s._v("基于上面dev环境的一些配置，如果要配置生产环境，需要做一些改动")])]),s._v(" "),t("p",[s._v("新建一个webpack.prod.js文件，复制config的内容，但是有些配置要修改掉")]),s._v(" "),t("h3",[s._v("1、修改webpack打包后output输出的文件名，加一个hash值")]),s._v(" "),t("p",[s._v("当内容改变时，hash值也会改变的")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[s._v("output: { "),t("span",{staticClass:"hljs-comment"},[s._v("// 出口文件配置")]),s._v("\n  "),t("span",{staticClass:"hljs-comment"},[s._v("//  filename: 'bundle.js',")]),s._v("\n   "),t("span",{staticClass:"hljs-attr"},[s._v("filename")]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v("'bundle.[contenthash].js'")]),s._v(", "),t("span",{staticClass:"hljs-comment"},[s._v("// 生产环境，加入hash值")]),s._v("\n   "),t("span",{staticClass:"hljs-attr"},[s._v("path")]),s._v(": path.join(__dirname, "),t("span",{staticClass:"hljs-string"},[s._v("'dist'")]),s._v(")\n  },\n")])]),s._v(" "),t("h3",[s._v("2、修改package.json中build命令，指定文件为webpack.prod.js")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-comment"},[s._v('// "build-dev": "webpack --config webpack.config.js",')]),s._v("\n"),t("span",{staticClass:"hljs-string"},[s._v('"build"')]),s._v(": "),t("span",{staticClass:"hljs-string"},[s._v('"webpack --config webpack.prod.js"')]),s._v(",\n")])])])}]},l=t("VU/8")(null,n,!1,null,null,null);a.default=l.exports}});
//# sourceMappingURL=6.fda26935ac7fe2c0a239.js.map