webpackJsonp([36],{ZQm3:function(s,a,t){s.exports=t("m7S6")},m7S6:function(s,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("p",[s._v("参考文章：")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.yuque.com/along-n3gko/ezt5z9/xkzwk1"}},[s._v("函数式编程 · 语雀")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.bookstack.cn/read/mostly-adequate-guide-chinese/README.md"}},[s._v("关于本书")])]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html"}},[s._v("函数式编程入门教程")])]),s._v(" "),t("h1",[s._v("一、一些概念")]),s._v(" "),t("h3",[s._v("我们在设计方案解决问题时，应当做到如下设计原则")]),s._v(" "),t("ol",[t("li",[s._v("可扩展性----我们是否需要不断的重构代码去支持额外功能，或者功能调整时不好修改")]),s._v(" "),t("li",[s._v("易模块化----如果我们修改了一个文件，另一个文件是否也会受到影响")]),s._v(" "),t("li",[s._v("可重用性----是否有很多的重复代码")]),s._v(" "),t("li",[s._v("可测性 ----是否可添加单元测试")]),s._v(" "),t("li",[s._v("易推理性----写的代码是否结构性非常差，难以阅读")])]),s._v(" "),t("h3",[s._v("范畴论")]),s._v(" "),t("ol",[t("li",[s._v('函数式编程起源于范畴论，彼此之间存在某种关系的概念、事物、对象等等，都构成"范畴"，可以把"范畴"想象成是一个容器，里面包含值（value）、值的变形关系，也就是函数。范畴论使用函数，表达范畴之间的关系。')]),s._v(" "),t("li",[s._v("本质上，函数式编程只是范畴论的运算方法，跟数理逻辑、微积分、行列式是同一类东西，都是数学方法，只是碰巧它能用来写程序。")])]),s._v(" "),t("h3",[s._v("纯函数")]),s._v(" "),t("p",[s._v("纯函数是这样一种函数，即相同的输入，永远会得到相同的输出，而且没有任何可观察的副作用。")]),s._v(" "),t("pre",[t("code",[s._v("如 slice 和 splice，这两个函数的作用并无二致——但是我们说 slice 符合纯函数的定义，因为对相同的输入它保证能返回相同的输出。而 splice 会改变原数组；这就会产生可观察到的副作用，即这个数组永久地改变了。\n")])]),s._v(" "),t("h3",[s._v("副作用")]),s._v(" "),t("p",[s._v("副作用是在计算结果的过程中，系统状态的一种变化，或者与外部世界进行的可观察的交互。如")]),s._v(" "),t("ul",[t("li",[s._v("更改文件系统")]),s._v(" "),t("li",[s._v("往数据库插入记录")]),s._v(" "),t("li",[s._v("发送一个 http 请求")]),s._v(" "),t("li",[s._v("可变数据")]),s._v(" "),t("li",[s._v("获取用户输入")]),s._v(" "),t("li",[s._v("DOM 查询")])]),s._v(" "),t("p",[s._v("等等")]),s._v(" "),t("p",[s._v("并不是说，要禁止使用一切副作用，而是说，要让它们在可控的范围内发生。")]),s._v(" "),t("h3",[s._v("函数合成")]),s._v(" "),t("p",[s._v('如果一个值要经过多个函数，才能变成另外一个值，就可以把所有中间步骤合并成一个函数，这叫做"函数的合成"（compose）')]),s._v(" "),t("h3",[s._v("函数柯里化")]),s._v(" "),t("p",[s._v('所谓"柯里化"，就是把一个多参数的函数，转化为单参数函数')]),s._v(" "),t("h1",[s._v("二、函数curry柯里化")]),s._v(" "),t("p",[t("strong",[s._v("个人理解：")])]),s._v(" "),t("p",[s._v("函数拆分成只执行第一个参数（部分参数）的函数，并且返回一个函数和剩余的参数，有点像分步执行，拆分成一个一个的子任务，这样做可以封装很多通用方法，参数复用，代码更清晰")]),s._v(" "),t("p",[s._v("参考文章：")]),s._v(" "),t("p",[t("a",{attrs:{href:"http://jianshu.com/p/2975c25e4d71"}})]),s._v(" "),t("h3",[s._v("1、基本概念")]),s._v(" "),t("p",[s._v("curry 的概念很简单："),t("strong",[s._v("只传递给函数一部分参数来调用它，让它返回一个函数去处理剩下的参数")]),s._v("。")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-comment"},[s._v("// 普通的add函数")]),s._v("\n"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("add")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("x, y")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" x + y\n}\n\n"),t("span",{staticClass:"hljs-comment"},[s._v("// Currying后")]),s._v("\n"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("curryingAdd")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("x")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("y")]),s._v(") ")]),s._v("{\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" x + y\n    }\n}\n\nadd("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")           "),t("span",{staticClass:"hljs-comment"},[s._v("// 3")]),s._v("\ncurryingAdd("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")   "),t("span",{staticClass:"hljs-comment"},[s._v("// 3")]),s._v("\n")])]),s._v(" "),t("h3",[s._v("2、应用")]),s._v(" "),t("h3",[s._v("参数复用")]),s._v(" "),t("p",[s._v("如果我有很多地方都要校验是否有数字，其实就是需要将第一个参数reg进行复用，这样别的地方就能够直接调用hasNumber，hasLetter等函数，让参数能够复用，调用起来也更方便。")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-comment"},[s._v("// 正常正则验证字符串 reg.test(txt)")]),s._v("\n\n"),t("span",{staticClass:"hljs-comment"},[s._v("// 函数封装后")]),s._v("\n"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("check")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("reg, txt")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" reg.test(txt)\n}\n\ncheck("),t("span",{staticClass:"hljs-regexp"},[s._v("/\\d+/g")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'test'")]),s._v(")       "),t("span",{staticClass:"hljs-comment"},[s._v("//false")]),s._v("\ncheck("),t("span",{staticClass:"hljs-regexp"},[s._v("/[a-z]+/g")]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v("'test'")]),s._v(")    "),t("span",{staticClass:"hljs-comment"},[s._v("//true")]),s._v("\n\n"),t("span",{staticClass:"hljs-comment"},[s._v("// Currying后")]),s._v("\n"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("curryingCheck")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("reg")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("txt")]),s._v(") ")]),s._v("{\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" reg.test(txt)\n    }\n}\n\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" hasNumber = curryingCheck("),t("span",{staticClass:"hljs-regexp"},[s._v("/\\d+/g")]),s._v(")\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" hasLetter = curryingCheck("),t("span",{staticClass:"hljs-regexp"},[s._v("/[a-z]+/g")]),s._v(")\n\nhasNumber("),t("span",{staticClass:"hljs-string"},[s._v("'test1'")]),s._v(")      "),t("span",{staticClass:"hljs-comment"},[s._v("// true")]),s._v("\nhasNumber("),t("span",{staticClass:"hljs-string"},[s._v("'testtest'")]),s._v(")   "),t("span",{staticClass:"hljs-comment"},[s._v("// false")]),s._v("\nhasLetter("),t("span",{staticClass:"hljs-string"},[s._v("'21212'")]),s._v(")      "),t("span",{staticClass:"hljs-comment"},[s._v("// false")]),s._v("\n")])]),s._v(" "),t("h3",[s._v("延迟执行")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-built_in"},[s._v("Function")]),s._v(".prototype.bind = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("context")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" _this = "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" args = "),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.slice.call("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")\n \n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _this.apply(context, args)\n    }\n}\n")])]),s._v(" "),t("h3",[s._v("3、通用的封装方法")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-comment"},[s._v("// 初步封装")]),s._v("\n"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" currying = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("fn")]),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-comment"},[s._v("// args 获取第一个方法内的全部参数")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" args = "),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.slice.call("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n        "),t("span",{staticClass:"hljs-comment"},[s._v("// 将后面方法里的全部参数和args进行合并")]),s._v("\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" newArgs = args.concat("),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.slice.call("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v("))\n        "),t("span",{staticClass:"hljs-comment"},[s._v("// 把合并后的参数通过apply作为fn的参数并执行")]),s._v("\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" fn.apply("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", newArgs)\n    }\n}\n")])]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-comment"},[s._v("// 支持多参数传递")]),s._v("\n"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("progressCurrying")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("fn, args")]),s._v(") ")]),s._v("{\n\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" _this = "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" len = fn.length;\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" args = args || [];\n\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" _args = "),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.slice.call("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(");\n        "),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.push.apply(args, _args);\n\n        "),t("span",{staticClass:"hljs-comment"},[s._v("// 如果参数个数小于最初的fn.length，则递归调用，继续收集参数")]),s._v("\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (_args.length < len) {\n            "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" progressCurrying.call(_this, fn, _args);\n        }\n\n        "),t("span",{staticClass:"hljs-comment"},[s._v("// 参数收集完毕，则执行fn")]),s._v("\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" fn.apply("),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", _args);\n    }\n}\n")])]),s._v(" "),t("h3",[s._v("4、经典面试题")]),s._v(" "),t("pre",[t("code",{staticClass:"language-jsx"},[t("span",{staticClass:"hljs-comment"},[s._v("// 实现一个add方法，使计算结果能够满足如下预期：")]),s._v("\nadd("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(") = "),t("span",{staticClass:"hljs-number"},[s._v("6")]),s._v(";\nadd("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("4")]),s._v(") = "),t("span",{staticClass:"hljs-number"},[s._v("10")]),s._v(";\nadd("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("4")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("5")]),s._v(") = "),t("span",{staticClass:"hljs-number"},[s._v("15")]),s._v(";\n\n"),t("span",{staticClass:"hljs-comment"},[s._v("// 第一个add(1)(2)(3)基础方法")]),s._v("\n"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("baseAdd")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("num")]),s._v(")")]),s._v("{\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" sum = num\n\t"),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" adder = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"},[s._v("num")]),s._v(")")]),s._v("{\n\t\tsum +=num;\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" adder\n\t}\n  adder.toString = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(")")]),s._v("{\n\t  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" sum\n  }\n  "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" adder\n}\n\n"),t("span",{staticClass:"hljs-comment"},[s._v("// 通用方法")]),s._v("\n"),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("add")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),t("span",{staticClass:"hljs-comment"},[s._v("// 第一次执行时，定义一个数组专门用来存储所有的参数")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" _args = "),t("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.slice.call("),t("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(");\n\n    "),t("span",{staticClass:"hljs-comment"},[s._v("// 再内部声明一个函数，利用闭包的特性保存_args并收集所有的参数值")]),s._v("\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" _adder = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n        _args.push(...arguments);\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _adder;\n    };\n\n    "),t("span",{staticClass:"hljs-comment"},[s._v("// 利用toString隐式转换的特性，当最后执行时隐式转换，并计算最终的值返回")]),s._v("\n    _adder.toString = "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _args.reduce("),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),t("span",{staticClass:"hljs-params"},[s._v("a, b")]),s._v(") ")]),s._v("{\n            "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" a + b;\n        });\n    }\n    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _adder;\n}\n\nadd("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(")                "),t("span",{staticClass:"hljs-comment"},[s._v("// 6")]),s._v("\nadd("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("4")]),s._v(")             "),t("span",{staticClass:"hljs-comment"},[s._v("// 10")]),s._v("\nadd("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("4")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("5")]),s._v(")          "),t("span",{staticClass:"hljs-comment"},[s._v("// 15")]),s._v("\nadd("),t("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("6")]),s._v(")("),t("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(")                "),t("span",{staticClass:"hljs-comment"},[s._v("// 9")]),s._v("\n")])]),s._v(" "),t("p",[s._v("关于toString隐式类型转换，可见：")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/barrior/p/4598354.html"}},[s._v("JavaScript中valueOf、toString的隐式调用")])])])}]},_=t("VU/8")(null,n,!1,null,null,null);a.default=_.exports}});
//# sourceMappingURL=36.585ccbae7b8e8df4730c.js.map