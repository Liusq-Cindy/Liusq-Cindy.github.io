# 介绍

> Vue.js 是构建客户端应用程序的框架。默认情况下，可以在浏览器中输出 Vue 组件，进行生成 DOM 和操作 DOM。然而，也可以将同一个组件渲染为服务端的 HTML 字符串，将它们直接发送到浏览器，最后将这些静态标记"激活"为客户端上完全可交互的应用程序。

> 即：SSR大致的意思就是**vue在客户端将标签渲染成的整个 html 片段的工作在服务端完成，服务端形成的html 片段直接返回给客户端这个过程**就叫做服务端渲染。

服务端渲染 SSR 的优缺点如下：

（1）服务端渲染的优点：

- **更好的 SEO**：因为 SPA 页面的内容是通过 Ajax 获取，而搜索引擎爬取工具并不会等待 Ajax 异步完成后再抓取页面内容，所以在 SPA 中是抓取不到页面通过 Ajax 获取到的内容；而 SSR 是直接由服务端返回已经渲染好的页面（数据已经包含在页面中），所以搜索引擎爬取工具可以抓取渲染好的页面；
- **更快的内容到达时间（首屏加载更快）**：SPA 会等待所有 Vue 编译后的 js 文件都下载完成后，才开始进行页面的渲染，文件下载等需要一定的时间等，所以首屏渲染需要一定的时间；SSR 直接由服务端渲染好页面直接返回显示，无需等待下载 js 文件及再去渲染等，所以 SSR 有更快的内容到达时间；

（2) 服务端渲染的缺点：

- 更多的开发条件限制：例如服务端渲染只支持 beforCreate 和 created 两个钩子函数，这会导致一些外部扩展库需要特殊处理，才能在服务端渲染应用程序中运行；并且与可以部署在任何静态文件服务器上的完全静态单页面应用程序 SPA 不同，服务端渲染应用程序，需要处于 Node.js server 运行环境；
- 更多的服务器负载：在 Node.js 中渲染完整的应用程序，显然会比仅仅提供静态文件的 server 更加大量占用CPU 资源 (CPU-intensive - CPU 密集)，因此如果你预料在高流量环境 ( high traffic ) 下使用，请准备相应的服务器负载，并明智地采用缓存策略。

如果没有 SSR 开发经验的同学，可以参考本文作者的另一篇 SSR 的实践文章《Vue SSR 踩坑之旅》，里面 SSR 项目搭建以及附有项目源码。

# 使用

要将vue项目改为vue-ssr渲染的话，需要进行一系列的改造，因为vue-ssr是需要在node环境下的。具体的先忽略，以后有时间和条件，可手动改造一个试试，这里有两篇文章可供参考：

[vue SSR 部署详解_weixin_30732487的博客-CSDN博客](https://blog.csdn.net/weixin_30732487/article/details/98167965?utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-1.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7EBlogCommendFromBaidu%7Edefault-1.control)

[Vue 服务端渲染（SSR）、Nuxt.js - 从入门到实践_大灰狼的小绵羊哥哥的博客-CSDN博客](https://blog.csdn.net/sinat_17775997/article/details/83820140)

# 常见问题QA

## 1、Vue-SSR 是什么？有什么好处？

vue本身是不支持SEO（搜索引擎优化，如更好的被检索、更快渲染）的，因为vue这种spa单页应用正常情况下在index.html文件中只有一个简单的标签，没有内容，不利于爬虫搜索，一开始只是一个空的.app的div，而后将资源处理完，挂载到dom节点上，为了解决这个问题，vue提出了SSR服务端渲染解决方案，大致的意思就是**vue在客户端将标签渲染成的整个 html 片段的工作在服务端完成，服务端形成的html 片段直接返回给客户端这个过程**就叫做服务端渲染。

好处：更好的SEO，更快的首屏加载速度、优化用户体验

## 2、Vue-SSR渲染原理

原理：相当于服务端前面加了一层url分配，可以假想为服务端的中间层，

当地址栏url改变或者直接刷新，其实直接从服务器返回内容，是一个包含内容部分的html模板，是服务端渲染

而在交互过程中则是ajax处理操作，局部刷新，首先是在history模式下，通过history. pushState方式进而url改变，然后请求后台数据服务，拿到真正的数据，做到局部刷新，这时候接收的是数据而不是模板

## 3、**服务器端渲染 vs 预渲染 (SSR vs Prerendering)**

### Vue-SSR适合的使用场景：

交互少，数据多，例如新闻，博客，论坛类等，如果 SEO 对你的站点至关重要，而你的页面又是异步获取内容

### **预渲染 (Prerendering)**

如果你调研服务器端渲染 (SSR) 只是用来改善少数营销页面（例如 `/`, `/about`, `/contact` 等）的 SEO，那么你可能需要**预渲染**。无需使用 web 服务器实时动态编译 HTML，而是使用预渲染方式，在构建时 (build time) 简单地生成针对特定路由的静态 HTML 文件。优点是设置预渲染更简单，并可以将你的前端作为一个完全静态的站点。

如果你使用 webpack，你可以使用 prerender-spa-plugin 轻松地添加预渲染。它已经被 Vue 应用程序广泛测试

## 4、nuxt.js 是什么？

建议看官方文档 [https://www.nuxtjs.cn/guide](https://www.nuxtjs.cn/guide)

简而言之Nuxt.js就是Vue SSR的一个开箱即用的框架。安装好就可以直接写业务代码，而不需要像vue原生ssr改造这样做过多的配置。

既然是一个框架，那我们的就要按照它的规则来配置和写代码，前面提供的官方文档提供了非常详细的介绍。